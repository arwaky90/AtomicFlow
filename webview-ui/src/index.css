@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   PREMIUM DARK GLASSMORPHISM DESIGN SYSTEM
   ======================================== */

@layer base {
  :root {
    /* Base Colors - Deep Charcoal / Near-Black */
    --background: 215 28% 5%;       /* #0B0F14 */
    --foreground: 210 20% 93%;      /* #E6EAF0 - soft white */
    
    /* Card/Panel - Subtle glass panels */
    --card: 216 28% 7%;             /* #0E131A */
    --card-foreground: 210 20% 93%;
    
    /* Popover */
    --popover: 216 28% 8%;
    --popover-foreground: 210 20% 93%;
    
    /* Primary - Muted Ice Blue / Cyan */
    --primary: 195 60% 55%;         /* Ice blue accent */
    --primary-foreground: 215 28% 5%;
    
    /* Secondary - Soft neutral */
    --secondary: 216 20% 12%;
    --secondary-foreground: 210 15% 75%;
    
    /* Muted - For secondary text */
    --muted: 216 15% 14%;
    --muted-foreground: 210 10% 55%;
    
    /* Accent - Cyan glow */
    --accent: 195 50% 45%;
    --accent-foreground: 210 20% 93%;
    
    /* Destructive */
    --destructive: 0 55% 50%;
    --destructive-foreground: 210 20% 93%;
    
    /* Borders - Very subtle */
    --border: 216 15% 18%;
    --input: 216 18% 15%;
    --ring: 195 60% 55%;
    
    /* Radius - Smooth corners */
    --radius: 0.75rem;
    
    /* Glass panel opacity */
    --glass-opacity: 0.08;
    --glass-border-opacity: 0.15;
    
    /* Shadows */
    --shadow-glass: 0 8px 32px rgba(0, 0, 0, 0.4);
    --shadow-glow: 0 0 20px rgba(107, 177, 198, 0.15);
  }

  /* Force dark mode always */
  .dark, :root {
    color-scheme: dark;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  
  html {
    font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  body {
    @apply bg-background text-foreground;
    /* Subtle noise texture overlay */
    background-image: 
      radial-gradient(ellipse at top, hsl(216 28% 8%) 0%, transparent 50%),
      radial-gradient(ellipse at bottom, hsl(215 28% 4%) 0%, transparent 50%);
  }
}

/* ========================================
   GLASSMORPHISM UTILITIES
   ======================================== */
@layer components {
  /* Premium Glass Panel */
  .glass-panel {
    @apply 
      bg-[hsl(216_28%_10%/0.6)]
      backdrop-blur-xl
      border border-[hsl(210_15%_25%/0.3)]
      shadow-[0_8px_32px_rgba(0,0,0,0.4)]
      rounded-xl;
  }
  
  /* Glass Card - Elevated */
  .glass-card {
    @apply 
      bg-[hsl(216_28%_12%/0.5)]
      backdrop-blur-md
      border border-[hsl(210_20%_30%/0.25)]
      shadow-[0_4px_24px_rgba(0,0,0,0.3)]
      rounded-lg
      transition-all duration-300;
  }
  
  .glass-card:hover {
    @apply 
      border-[hsl(195_50%_50%/0.3)]
      shadow-[0_8px_32px_rgba(0,0,0,0.4),_0_0_20px_rgba(107,177,198,0.1)];
  }
  
  /* Glass Button */
  .glass-button {
    @apply 
      bg-[hsl(216_28%_14%/0.7)]
      backdrop-blur-sm
      border border-[hsl(210_15%_25%/0.4)]
      rounded-lg
      px-4 py-2
      text-sm font-medium
      text-[hsl(210_20%_85%)]
      transition-all duration-200
      hover:bg-[hsl(216_28%_18%/0.8)]
      hover:border-[hsl(195_50%_50%/0.4)]
      hover:shadow-[0_0_15px_rgba(107,177,198,0.15)]
      active:scale-[0.98];
  }
  
  /* Pill Button */
  .pill-button {
    @apply 
      px-4 py-1.5
      rounded-full
      text-sm font-medium
      transition-all duration-200;
  }
  
  .pill-button-active {
    @apply 
      bg-gradient-to-r from-[hsl(195_55%_45%)] to-[hsl(200_50%_50%)]
      text-[hsl(215_28%_5%)]
      shadow-[0_0_20px_rgba(107,177,198,0.3)];
  }
  
  .pill-button-inactive {
    @apply 
      text-[hsl(210_10%_55%)]
      hover:text-[hsl(210_15%_75%)]
      hover:bg-[hsl(216_20%_15%/0.5)];
  }
  
  /* Premium Input */
  .glass-input {
    @apply 
      bg-[hsl(216_28%_10%/0.6)]
      backdrop-blur-md
      border border-[hsl(210_15%_22%/0.5)]
      rounded-full
      px-4 py-2
      text-sm
      text-foreground
      placeholder:text-[hsl(210_10%_45%)]
      focus:outline-none
      focus:border-[hsl(195_50%_50%/0.5)]
      focus:shadow-[0_0_15px_rgba(107,177,198,0.15)]
      transition-all duration-200;
  }
  
  /* Node Glass Effect */
  .node-glass {
    @apply 
      bg-[hsl(216_28%_12%/0.65)]
      backdrop-blur-md
      border border-[hsl(210_20%_28%/0.4)]
      shadow-[0_4px_20px_rgba(0,0,0,0.35)]
      rounded-xl
      transition-all duration-300;
  }
  
  .node-glass:hover {
    @apply 
      shadow-[0_8px_30px_rgba(0,0,0,0.45),_0_0_25px_rgba(107,177,198,0.08)];
  }
  
  .node-glass-selected {
    @apply 
      border-[hsl(195_55%_50%/0.6)]
      shadow-[0_0_25px_rgba(107,177,198,0.2)];
  }
  
  .node-glass-focused {
    @apply 
      ring-2 ring-[hsl(45_90%_55%/0.5)]
      shadow-[0_0_30px_rgba(234,179,8,0.15)];
  }
  
  /* Status Indicator */
  .status-dot {
    @apply w-2 h-2 rounded-full bg-[hsl(150_60%_50%)] shadow-[0_0_8px_rgba(34,197,94,0.5)];
  }
  
  /* Subtle glow text */
  .glow-text {
    text-shadow: 0 0 20px rgba(107, 177, 198, 0.3);
  }
}

/* ========================================
   REACT FLOW CUSTOMIZATIONS
   ======================================== */
.react-flow__background {
  background-color: hsl(220 10% 15%) !important;
}

.react-flow__background pattern circle {
  fill: hsl(220 10% 22%) !important;
}

.react-flow__controls {
  @apply glass-panel !important;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3) !important;
}

.react-flow__controls-button {
  @apply 
    bg-transparent 
    border-none 
    text-[hsl(210_10%_55%)] 
    hover:text-[hsl(210_20%_85%)] 
    hover:bg-[hsl(216_20%_18%/0.6)]
    transition-all duration-150 !important;
}

.react-flow__minimap {
  @apply glass-panel !important;
  border-radius: 12px !important;
  overflow: hidden !important;
}

.react-flow__edge-path {
  stroke: hsl(195 40% 40%) !important;
  stroke-width: 1.5 !important;
}

.react-flow__handle {
  @apply 
    !bg-[hsl(195_50%_45%)]
    !border-2 !border-[hsl(195_40%_35%)]
    !w-3 !h-3
    transition-all duration-150;
}

.react-flow__handle:hover {
  @apply 
    !bg-[hsl(195_55%_55%)]
    !shadow-[0_0_10px_rgba(107,177,198,0.4)];
}

/* ========================================
   REACT FLOW NODE TRANSITIONS
   ======================================== */
.react-flow__node {
  /* GPU Acceleration Hacks */
  transform: translate3d(0, 0, 0); 
  backface-visibility: hidden;
  perspective: 1000px;
  
  /* "Instant" Snap Motion */
  /* duration 0.05s, sharp easing */
  transition: transform 0.05s cubic-bezier(0.2, 1, 0.3, 1), 
              width 0.05s cubic-bezier(0.2, 1, 0.3, 1), 
              height 0.05s cubic-bezier(0.2, 1, 0.3, 1);
  will-change: transform; /* Only optimize transform */
}

/* Disable transition during active dragging to avoid "lag" feeling */
.react-flow__node.dragging,
.react-flow__node.react-flow__node-drag {
  transition: none !important;
}

/* ========================================
   SCROLLBAR STYLING
   ======================================== */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(216 28% 8%);
}

::-webkit-scrollbar-thumb {
  background: hsl(216 15% 20%);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(216 15% 25%);
}

/* ========================================
   ANIMATIONS
   ======================================== */
@keyframes subtle-pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.animate-subtle-pulse {
  animation: subtle-pulse 2s ease-in-out infinite;
}

@keyframes ambient-glow {
  0%, 100% { box-shadow: 0 0 20px rgba(107, 177, 198, 0.1); }
  50% { box-shadow: 0 0 30px rgba(107, 177, 198, 0.2); }
}

.animate-ambient-glow {
  animation: ambient-glow 3s ease-in-out infinite;
}

@keyframes flowParticle {
  0% { offset-distance: 0%; }
  100% { offset-distance: 100%; }
}
